const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {text: " Generate Travel Plan for Location : Ukraine, for 5 Days and 4 Night for Just Me with a Moderate budget with a Flight details,Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time to travel each of the location for 5 Days and 4 night with each day plan with best time to visit in JSON format and translate this JSON format value as English language"},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"travelPlan\": {\n    \"destination\": \"Ukraine\",\n    \"duration\": \"5 Days and 4 Nights\",\n    \"travelerCount\": 1,\n    \"budget\": \"Moderate\",\n    \"flight\": {\n      \"details\": \"Round-trip flight from your location to Kyiv, Ukraine (KBP).\",\n      \"price\": \"Estimated $400-$600 (varies based on origin and time of year)\",\n      \"bookingUrl\": \"https://www.google.com/flights\" // Replace with a specific booking website\n    },\n    \"hotels\": [\n      {\n        \"name\": \"Hostel 111\",\n        \"address\": \"Volodymyrska Street, 111, Kyiv, Ukraine, 01001\",\n        \"price\": \"$20-$30 per night\",\n        \"imageUrl\": \"https://www.hostel111.com/images/hostel-111-kyiv.jpg\",\n        \"geoCoordinates\": \"50.4452, 30.5230\",\n        \"rating\": 4.5,\n        \"description\": \"A popular budget-friendly hostel in a central location, offering shared rooms and private rooms. Close to many attractions.\",\n        \"nearbyPlaces\": [\n          {\n            \"name\": \"St. Sophia Cathedral\",\n            \"details\": \"A UNESCO World Heritage Site, a stunning example of Byzantine architecture.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Sophia_Cathedral_in_Kyiv.jpg/1200px-Sophia_Cathedral_in_Kyiv.jpg\",\n            \"geoCoordinates\": \"50.4635, 30.5205\",\n            \"ticketPricing\": \"Entrance fee: 100 UAH (~$3.50 USD)\",\n            \"timeToTravel\": \"30-60 minutes\"\n          },\n          {\n            \"name\": \"Golden Gate\",\n            \"details\": \"The remains of an ancient gate that once marked the entrance to the city.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Golden_Gate_Kyiv_2014.jpg/1200px-Golden_Gate_Kyiv_2014.jpg\",\n            \"geoCoordinates\": \"50.4619, 30.5233\",\n            \"ticketPricing\": \"Free\",\n            \"timeToTravel\": \"15-30 minutes\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Hotel de Paris\",\n        \"address\": \"Vozdvyzhenska Street, 3, Kyiv, Ukraine, 04071\",\n        \"price\": \"$50-$70 per night\",\n        \"imageUrl\": \"https://www.hoteldeparis.com.ua/images/gallery/hotel_de_paris_kyiv_1.jpg\",\n        \"geoCoordinates\": \"50.4452, 30.5230\",\n        \"rating\": 4,\n        \"description\": \"A charming hotel located in the historic district, offering elegant rooms and a cozy atmosphere.\",\n        \"nearbyPlaces\": [\n          {\n            \"name\": \"Andriyivsky Descent\",\n            \"details\": \"A picturesque street known for its art galleries, shops, and cafes.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Andriyivsky_Uzviz.jpg/1200px-Andriyivsky_Uzviz.jpg\",\n            \"geoCoordinates\": \"50.4607, 30.5171\",\n            \"ticketPricing\": \"Free\",\n            \"timeToTravel\": \"1-2 hours\"\n          }\n        ]\n      }\n    ],\n    \"dailyPlan\": [\n      {\n        \"day\": 1,\n        \"time\": \"Morning\",\n        \"activities\": [\n          {\n            \"name\": \"Arrive at Kyiv Boryspil International Airport (KBP)\",\n            \"details\": \"Take a taxi or public transportation to your hotel.\",\n            \"timeToTravel\": \"30-60 minutes (depending on traffic)\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Throughout the year, though summer months (June-August) are warmer.\"\n      },\n      {\n        \"day\": 1,\n        \"time\": \"Afternoon\",\n        \"activities\": [\n          {\n            \"name\": \"Explore St. Sophia Cathedral\",\n            \"details\": \"Admire the intricate mosaics and frescoes.\",\n            \"timeToTravel\": \"1-2 hours\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Morning or late afternoon to avoid crowds.\"\n      },\n      {\n        \"day\": 1,\n        \"time\": \"Evening\",\n        \"activities\": [\n          {\n            \"name\": \"Walk along Khreshchatyk Street\",\n            \"details\": \"Enjoy the vibrant atmosphere of Kyiv's main street.\",\n            \"timeToTravel\": \"1-2 hours\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Evenings are lively and offer a chance to see the city illuminated.\"\n      },\n      {\n        \"day\": 2,\n        \"time\": \"Morning\",\n        \"activities\": [\n          {\n            \"name\": \"Visit the Golden Gate\",\n            \"details\": \"Learn about the history of this ancient gate.\",\n            \"timeToTravel\": \"30-60 minutes\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Mornings are generally quieter.\"\n      },\n      {\n        \"day\": 2,\n        \"time\": \"Afternoon\",\n        \"activities\": [\n          {\n            \"name\": \"Explore the National Museum of the History of Ukraine\",\n            \"details\": \"Discover Ukraine's rich history and culture.\",\n            \"timeToTravel\": \"2-3 hours\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Mid-morning or early afternoon.\"\n      },\n      {\n        \"day\": 2,\n        \"time\": \"Evening\",\n        \"activities\": [\n          {\n            \"name\": \"Enjoy dinner and a performance at the National Opera of Ukraine\",\n            \"details\": \"Experience the cultural scene in Kyiv.\",\n            \"timeToTravel\": \"3-4 hours\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Evening is the perfect time for a performance.\"\n      },\n      {\n        \"day\": 3,\n        \"time\": \"Morning\",\n        \"activities\": [\n          {\n            \"name\": \"Take a day trip to Chernobyl\",\n            \"details\": \"Visit the site of the Chernobyl disaster and learn about its impact.\",\n            \"timeToTravel\": \"Full-day tour\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Book a tour in advance, as they often sell out.\"\n      },\n      {\n        \"day\": 4,\n        \"time\": \"Morning\",\n        \"activities\": [\n          {\n            \"name\": \"Explore Andriyivsky Descent\",\n            \"details\": \"Wander through this charming street and admire the architecture.\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Morning or early afternoon for a quieter experience.\"\n      },\n      {\n        \"day\": 4,\n        \"time\": \"Afternoon\",\n        \"activities\": [\n          {\n            \"name\": \"Visit the Kyiv Pechersk Lavra\",\n            \"details\": \"A UNESCO World Heritage Site, this monastery complex includes caves and churches.\",\n            \"timeToTravel\": \"2-3 hours\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Mid-morning or early afternoon.\"\n      },\n      {\n        \"day\": 4,\n        \"time\": \"Evening\",\n        \"activities\": [\n          {\n            \"name\": \"Enjoy a traditional Ukrainian dinner\",\n            \"details\": \"Try local cuisine like borscht, varenyky, and holubtsi.\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Evenings offer a chance to experience the city's nightlife.\"\n      },\n      {\n        \"day\": 5,\n        \"time\": \"Morning\",\n        \"activities\": [\n          {\n            \"name\": \"Visit the Motherland Monument\",\n            \"details\": \"A towering statue symbolizing the Ukrainian people's struggle for freedom.\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Mornings are generally more pleasant for outdoor activities.\"\n      },\n      {\n        \"day\": 5,\n        \"time\": \"Afternoon\",\n        \"activities\": [\n          {\n            \"name\": \"Relax at the Hydropark\",\n            \"details\": \"Enjoy the green spaces and water activities along the Dnieper River.\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Afternoon is a good time to enjoy the park's amenities.\"\n      },\n      {\n        \"day\": 5,\n        \"time\": \"Evening\",\n        \"activities\": [\n          {\n            \"name\": \"Depart from Kyiv Boryspil International Airport (KBP)\"\n          }\n        ],\n        \"bestTimeToVisit\": \"Evening is a typical time for departures.\"\n      }\n    ]\n  }\n}\n```\n\n## English Translation of the JSON Data\n\n**Travel Plan**\n\n* **Destination:** Ukraine\n* **Duration:** 5 Days and 4 Nights\n* **Traveler Count:** 1\n* **Budget:** Moderate\n* **Flight:**\n    * **Details:** Round-trip flight from your location to Kyiv, Ukraine (KBP).\n    * **Price:** Estimated $400-$600 (varies based on origin and time of year)\n    * **Booking URL:** https://www.google.com/flights (replace with a specific booking website)\n* **Hotels:**\n    * **Hostel 111**\n        * **Address:** Volodymyrska Street, 111, Kyiv, Ukraine, 01001\n        * **Price:** $20-$30 per night\n        * **Image URL:** https://www.hostel111.com/images/hostel-111-kyiv.jpg\n        * **Geo Coordinates:** 50.4452, 30.5230\n        * **Rating:** 4.5\n        * **Description:** A popular budget-friendly hostel in a central location, offering shared rooms and private rooms. Close to many attractions.\n        * **Nearby Places:**\n            * **St. Sophia Cathedral:** A UNESCO World Heritage Site, a stunning example of Byzantine architecture. (Image URL: https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Sophia_Cathedral_in_Kyiv.jpg/1200px-Sophia_Cathedral_in_Kyiv.jpg, Geo Coordinates: 50.4635, 30.5205, Ticket Price: 100 UAH (~$3.50 USD), Time to Travel: 30-60 minutes)\n            * **Golden Gate:** The remains of an ancient gate that once marked the entrance to the city. (Image URL: https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Golden_Gate_Kyiv_2014.jpg/1200px-Golden_Gate_Kyiv_2014.jpg, Geo Coordinates: 50.4619, 30.5233, Ticket Price: Free, Time to Travel: 15-30 minutes)\n    * **Hotel de Paris**\n        * **Address:** Vozdvyzhenska Street, 3, Kyiv, Ukraine, 04071\n        * **Price:** $50-$70 per night\n        * **Image URL:** https://www.hoteldeparis.com.ua/images/gallery/hotel_de_paris_kyiv_1.jpg\n        * **Geo Coordinates:** 50.4452, 30.5230\n        * **Rating:** 4\n        * **Description:** A charming hotel located in the historic district, offering elegant rooms and a cozy atmosphere.\n        * **Nearby Places:**\n            * **Andriyivsky Descent:** A picturesque street known for its art galleries, shops, and cafes. (Image URL: https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Andriyivsky_Uzviz.jpg/1200px-Andriyivsky_Uzviz.jpg, Geo Coordinates: 50.4607, 30.5171, Ticket Price: Free, Time to Travel: 1-2 hours)\n* **Daily Plan:**\n    * **Day 1:**\n        * **Morning:** Arrive at Kyiv Boryspil International Airport (KBP) and transfer to your hotel (30-60 minutes). \n        * **Afternoon:** Explore St. Sophia Cathedral (1-2 hours).\n        * **Evening:** Walk along Khreshchatyk Street (1-2 hours). \n    * **Day 2:**\n        * **Morning:** Visit the Golden Gate (30-60 minutes).\n        * **Afternoon:** Explore the National Museum of the History of Ukraine (2-3 hours). \n        * **Evening:** Enjoy dinner and a performance at the National Opera of Ukraine (3-4 hours). \n    * **Day 3:** \n        * **Morning:** Take a day trip to Chernobyl (full-day tour). \n    * **Day 4:** \n        * **Morning:** Explore Andriyivsky Descent.\n        * **Afternoon:** Visit the Kyiv Pechersk Lavra (2-3 hours). \n        * **Evening:** Enjoy a traditional Ukrainian dinner.\n    * **Day 5:** \n        * **Morning:** Visit the Motherland Monument.\n        * **Afternoon:** Relax at the Hydropark.\n        * **Evening:** Depart from Kyiv Boryspil International Airport (KBP).\n\n**Best Time to Visit:** \n* Throughout the year, though summer months (June-August) are warmer.\n* Consider visiting during the shoulder seasons (spring or fall) for fewer crowds and pleasant weather.\n\n**Note:** \n* This plan is a suggestion and can be customized based on your interests and preferences.\n* Be sure to book flights and tours in advance, especially during peak season.\n* Check for visa requirements and any travel advisories before your trip.\n"},
      ],
    },
  ],
});
